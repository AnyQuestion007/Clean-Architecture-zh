
后 序
L W — nOTBCTJQ--〉 X ：: • • M 厂 - I 皿 :2 •几％-• -• •:・总 心 © ・W W g k 涣 边 G 耸 彬 g & 彌 和 y:彬 坯 3 W W W W 亦 "
我的软件工程师生涯开始于20世纪90年代，那是一个恐龙级大型架构统治世 
界的时代。要想在那样的时代获得一席之地，我们必须学会对象及其组件、设计模 
式、统一建模语言（包括其前身）的相关知识。
现在想起来,或许真的可以考虑把我们那段日子所做的事情叫作“童子军项目”。
每个项目的开头都会有一段长长的设计阶段，以便等那些“高级”程序员为一些跟
随他们的、较 “低级”的程序员制订好系统的设计蓝图，当然，这 些 “高级”程序 
员似乎永远完不成这件事。
于是乎，做这件事的人被升级到了“软件架构师”，接着是“首席架构师” “总
架构师” “枢密院首席架构师”以及其他各种高不可言的头衔，最终，我们还是让 
一切回到了原点。而我似乎注定要把时间花在画那些带箭头的盒子和编写 
PowerPoint的事情上，而这些事对真实代码的影响近乎为零。 这让我无比受:挫，每一行代码本身都至少包含了一条设计决策，任何一个写代 
码的家伙对软件质量的影响都远在我这个PowerPoint专业户之上。 幸运的是，接卜來发工的敏捷软件开发革命终于让我们这些架构师脱离了苦海。
牛竟我是一名程序员，喜欢的是编程。而且我也发现影响软件质量最好的方法还是后序
编写代码。
捷开这发些”的大小型行架星构灭像绝恐了龙，一［样驚在囂1 j器 驚. 平z原 上 游 荡 '林 被 一 颗 叫 作 “敏 的 事 鶯 ; 囂 豐 ！可以E 由地专注于真正重要的内容’并思考如何为他们所做 
坐 爲 ;十 刑 力 口 *也 就 是 说 ，他们现在再也不需要浪费几周或几个月的时间 
尊待［二大殳木构的设计文档了，他们可以名正言顺地忽略这些设计，直接按照自 
己的想法编写代码。然后，开发团队只需要安排客户直接参与测试，并在快速设计 
会议上得到用户的支持，然后他们就可以继续写代码了。
大型架构像恐龙一样消失了，前期设计够用、后期进行大量重构的设计思想如 
小巧玲珑的哺乳动物一样代替了它们，软件架构迎来了响应式设计的时代。
好吧，无论如何，以上这些都属于理论。
把架构设计工作交给程序员的问题就是，程序员必须学会像架构师一样思考问 
题。事实证明，我们在大型架构时代学到的东西也并非一文不值。其设计软件结构 
的方法依然在我们保持软件的适应和扩展能力方面有着深远的影响，即使在短期开 
发中也是如此。
我们的每一项设计决策都必须为未来的变化敞开大门。就像打台球一样’我心 
的每一杆击球都不只是为了要把球打进洞里，它也事关下一杆击球时所在的位置。 
让我们现在编写的代码不对未来的代码产生阻碍是一项非常重要的技能，通常需要 
花费多年的时间才能掌握。
因此，在大型架构时代让位给易碎型架构(Fragile Architecture)的新时代Z 后， 虽然设计创造的价值得到了快速发展，但这也让我们想要持续创新变得举疔维艰°
这里所有关于“拥抱变革"的讨论都很美好’但如果每修改T 代码的代价是 
500美元的话，这些变革恐怕根本就不会发'°
当时見立牟捞的软件开发者的时候'Bob 讪那篇关于面向对象设计原
并发现了其中的问题，在那之刖，这二门思
281架构整洁之道
代码,
现在，你们也看到了如何才能写 >'”既能捉/1、勺前价仇，乂不会阻碍未来价值的 
期符抓们也st亲 胃 实 践 帯 箪 则 ’并将其应用到自己的代码中厂> q 就像学习骑自行车一样，单纯靠阅读是无法掌握软件设计方法的。为了让我们 
从这本书中的伏益最大化，亲自实践是必不对少的。我们需要糸自分析自己的代码， 
查看其中是否存在Bob所强调的各种问题，然后在重构代码的实践中修复它们。如 果你在重构方面是个新手，那么你将从本书收获双重的宝贵学习经验。
我们得学会将书中的这些设计原则以及整洁架构融入自己的开发过程中，这可 
以大大减少新代码给我们带来的麻烦。例如，如果我们现在正在进行一次测试驱动 
的开发（TDD）, 就可以在每一次测试之后做一些设计审查，并及时整理我们的设 
计 （这比事后再修复这些不良设计要省时省力得多）。或者，在提交代码之前，我 
们也可以邀请同事一起审查代码。另外，我们也可以研究在构建软件的管道中引入 
一些代码的“质量把关”机制，以作为防止架构设计不够清晰分明的最后一道防线。 
（如果你还没有设置构建软件的管道，现在是否可以考虑设置一个了？）
这一切的重中之重就是要讨论架构的整洁性，我们要在自己的团队中讨论它， 
在各种开发者社区中讨论它。保证软件质量是我们每个人的责任，在区分架构的好 
坏标准上达成共识是一件非常重要的事。
我们必须意识到，大部分的软件开发者是没有太多架构意识的。就像25年前的 
我一样，是更有经验的开发者让我了解了架构。一旦我们一头扎进了整洁架构中， 
就会花时间围绕着它思考问题，并玩转它。
虽然开发者所在的技术环境一直在不断地发展，但本书所讨论的这些基本设计 
原则几乎不会发生变化。我一点都不怀疑在你们把Lean JSON Cloud NoSQL for Dummies当废纸卖掉很多年之后，这本书会还留在你们的书架上。我希望这本书会 对你们有很大的帮助，就像Bob那篇原创论文对我的帮助一样。
------ Jason Gorman 2017年 1 月 26日
I I I附录A架构整洁之道
为了说明这些优秀架构设汁思、想的來源，我打算和读者一起回顾一下我自己从 
1970 ”到现在所经历过的几个*目◎具川，有些顶I I是在架构设计角度比较有特点 
的，而另一些项冃则可以作为反例，指导后续项目。
另外，这个附录有一些个人自传体的影子, 
构设计匕但难免会涉及•些其他方面的因素。
我会尽量将讨论重点集中在软件架
工会财务记账系统
20世纪60年代末期，有一家名为ASC Tabulating的公司与Teamster工会的705 
区签订了合同，要为其提供一套财务记账系统。在实现环境上，ASC公司选择的是 
一台GE Datanet 30计算机（参见图A.1） 。
图A」：
-
欢:
2
• 
• •・・・■
GE Datanet 30 该图片来自Ed Thelen的网站ed-thelen.orgu