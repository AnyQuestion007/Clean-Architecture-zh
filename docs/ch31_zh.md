第 31章 W e b 是实现细节
而且作为-名系统架构师,我们应该把眼）
题，不应该把它们放在系统的核心业务逻仲「 仆
下面，我们来聊聊Q 公司的故事。该 公 司 构 建 | | 计 彳 的 .昭 ” 
这是一个GUI很好用的桌面程第，我很喜欢J 的人财务系统,
匕放性远•点,这些振荡只是短期问
桌面版的个人财务软件展示浏览器风格的呢？
我当然非常痛恨新的UI,显然其他人也这么认为— 因此在随后的几个版本里, 
Q 公司又逐渐将浏览器相关的设计从界面中去掉了，最终这个软件又回到正常的桌 
面UI模式。
假设你是Q 公司的软件架构师，市场人员说服了高层管理者，要将整个UI重 
新设计为“Web”版。你应该怎么办？换句话说，在这类事情发生之前，我们应该 提前做好哪方面的准备，才能应对这种无厘头的要求？
我们应该做的就是将业务规则与UI解耦。我不知道Q 公司的软件架构师是否
是这么做的，我也很想了解他们的故事。如果当时我在，我一定会全力游说他们将
业务逻辑与UI解耦, 因为谁知道市场推广人员接下来会想出什么好点子?
再说一下A 公司的故事，他们的产品是智能手机。最近他们发布了一个“操作 
系统”的升级版（谈论一个手机的操作系统本身就够奇怪的了！）。抛去别的改劝 
不说，这次“操作系统”的更新大幅修改了各种应用程序的外观。为什么？估计是
因为市场部某位“大神”的要・・■ 求吧。
我不了解这个设备中软件的细节，所以不知道这次改动是否显著影响「那些给 
a 公司的手机开发应用程序的人。我只能希望a 公司的系警m ：: 譽 2 的系统架构师能将UI和业务逻辑分离，因为这些市场抑人贝心f 过这里任何 
一丁点儿的耦合关系的。架构整洁之道
总结一下
将上面的故事总结成一句讥就是：GUI只是一个实现细匸而Web则是G5 的一种，所以也是一个实现细节。作为-名软件架构师，我们需要将区类细节与核 
心业务逻辑隔离开来。
其实我们可以这样考虑这个问题：Web只是一种I/O设备。早在20世纪60年 
代，我们就已经了解编写设备无关应用程序的重要性。这种独立性的重要性至今仍 
然没有变化，Web也不例外。
是这样的吗？有人可能会辩称Web这样的GUI是非常特殊的，它能力强大，强 大到让我们追求设备无关的架构变得毫无意义。当我们考虑到JavaScript数据校验 的复杂程度、可拖拽的Ajax调用，以及无数可以轻松引入的设计组件时，很容易认 为追求设备无关性是不现实的。
从某种程度上来说，的确如此。应用程序和GUI之间的频繁交互的确是与GUI 
的类型密切相关的。浏览器与Web应用之间的交互模式也的确与桌面客户端/服务器 之间的交互模式区别很大。想要让浏览器上的Web操作模仿我们在UNIX中对I/O 设备那样的操作，将其抽象成界面交互模型几乎是不可能的。
但我们其实可以从UI和应用程序之间的另一条边界出发来进行抽象化。因为业
务逻辑可以被视为是一组用例的集合。而每个用例都是以用户的身份来执行某种操
作的，所以它们都可以用输入数据、处理过程以及输出数据这个流程来描述。
也就是说，在 UI和应用程序之间的某一点上，输入数据会被认为达到了一个完 
整状态，然后用例就被允许进入执行阶段了。在用例执行完之后，其生成的返回数 
据又继续在UI与应用程序之间传递。
这样一来，完整的输入数据，以及完整的输出数据就可以被标准化为数据结构， 
并提供给执行用例的进程了 o 通过这种方法，我们就可以认为用例都是以设备无关 的方式在操作I/O设备。
250第 31章 W eb是实现细节
本章小结
这种抽象化处理并不容易，很有可能需要经历儿个来回才能找到匸确的方向， 
但这是完全可行的。由于世界上最不缺少的就是市场“大神”，很多时候做必些事
情还真的是非常有必要■ ■■ 的。